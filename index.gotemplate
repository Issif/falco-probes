<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <title>Falco Probes</title>
    <meta name="author" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="./js/dataTables.bootstrap.min.js"></script>
    <script type="text/javascript" src="./js/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="./js/jquery.dataTables.min.js"></script>
    <script>
        var urlParams = new URLSearchParams(window.location.search);
        $(document).ready(function(){
          $.getJSON("./data/"+urlParams.get('falcoversion')+".json", function( data ) {
            $('#probes').DataTable({
                "paging": false,
                "data" : data,
                "order": [[ 6, "desc" ]],
                columns : [
                    { "data" : "falco_version"},
                    { "data" : "architecture"},
                    { "data" : "kernel_version"},
                    { "data" : "hash"},
                    { "data" : "size"},
                    { "data" : "creation_date"},
                    { "data" : "link",  render: function ( data, type, row ) {
                                            return '<a href="'+data+'" download="'+data+'"><span class="glyphicon glyphicon-download-alt"></span></a>';
                                        }}
                    ],
                  columnDefs: [
                    {
                        targets: -1,
                        className: 'link-class'
                    }
                    ]
                });
            });
        });
    </script>
    </head>
    <body>
    <div>
        <img src="https://sysdig.com/wp-content/uploads/2018/10/Falco-horizontal-logo-teal_2x.png" height="55" alt="falco logo">
        {{ range $key, $value_ := . }}<span class="btn btn-link"><a href="?falcoversion={{ $key }}">{{ $key }}</a></span>{{ end }}
    </div>
    <br>
    <table id="probes" class="table table-striped table-condensed">
        <thead>
            <tr>
                <th>Falco Release</th>
                <th>Architecture</th> 
                <th>Kernel Version</th> 
                <th>Hash</th> 
                <th>Size</th> 
                <th>Creation Date</th> 
                <th>Link</th> 
            </tr>
        </thead>
    </table>
    </body>
</html>